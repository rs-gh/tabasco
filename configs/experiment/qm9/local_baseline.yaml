# @package _global_
# Local testing config for M3 Mac - baseline WITHOUT REPA
# Use this to compare against qm9_chemprop_local (with REPA)
defaults:
  - /experiment/qm9/baseline

tags: ["qm9", "baseline", "local"]

datamodule:
  batch_size: 32  # Smaller batch for local testing
  num_workers: 0  # Avoid multiprocessing issues on Mac

model:
  net:
    hidden_dim: 64  # Smaller model for faster iteration
    num_layers: 4   # Fewer layers
    num_heads: 4

  # No REPA loss - this is the baseline
  repa_loss: null

callbacks:
  ema: null  # Disable EMA - has issues with MPS
  mol_metrics: null  # Disable - sampling has NaN issues on MPS
  posebusters_metrics: null  # Disable - sampling has NaN issues on MPS
  save_mols: null  # Disable - sampling has NaN issues on MPS

trainer:
  max_epochs: 3  # Quick test
  accelerator: mps  # Use Apple Silicon GPU
  devices: 1
  log_every_n_steps: 10

logger:
  wandb:
    name: "${now:%m%d-%H%M}-tabasco-qm9-baseline-local"
